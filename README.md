# DemographiKS
Population-level forward simulation of polyploid evolution. Produces Ks data suitable for generating simulated Ks histograms.

<br>

## Example command
>python3 demographiKS.py config.xml

<br>

## Simulation overview
DemographiKS is a pipeline application, with the following steps:
1) Run SLiM
2) Generate paralogs
3) Shed genes
4) Save remaining paralogs as FASTA files
5) Calculate Ks between paralogs (PAML: codeml)
7) Plot simple histograms*
8) Prepare the final results (.csv files with Ks data)

* Note, DemographiKS is not intended to produce beautiful histograms. It is left to the user to upload the Ks datafiles generated by DemographiKS to the visualization tools of choice.
<br>

## Prerequisites
* Run on an environment with PAML installed. We suggest v4.10.7 but have found that other versions also work.
* Run on an environment with SLiM installed.
* We give directions for configuring an appropriate conda environment below.

<br>

## Installation

> git clone https://github.com/tamsen/DemographiKS

<br>

## Configuration
To automatically configure a conda environment suitable for DemographiKS, use the "DemographiKS_environment.yml" 
included in the "sample_configs" folder. Example commands to install and do a short run are below.

> conda env create -f /PathToDemographiKS/sample_configs/DemographiKS_environment.yml

> conda activate dgks_env

> python3 /PathToDemographiKS/demographiKS.py my-test-run.xml 

<br>

## Help
* There are example config files and an overview of the parameters in the "sample_configs" folder.

## OS
* Tested on a mac and linux (ubuntu)

## Referencing DemographiKS
Publication forthcoming
